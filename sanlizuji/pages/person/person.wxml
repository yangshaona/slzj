<!--pages/person/demo.wxml-->
<wxs src="../../utils/subut.wxs" module="tools"></wxs>
<!-- 顶部标题栏 -->
<view class="top" style="padding-top: {{statusHeight+16}}px;">
    个人中心
</view>

<!-- 教师用户基本信息栏 -->
<view wx:if="{{id_flag=='teacher'}}">
    <view class="infoBox">
        <view class="avator" style="height: {{imgHeight}}px;">
            <!-- <view wx:if="{{!user}}"> -->
            <image src="{{avator}}" mode="widthFix"></image>
            <!-- </view> -->
            <!-- <view wx:else> -->
            <!-- <image src="/icon/默认头像.png" mode="widthFix"></image> -->
            <!-- </view> -->
        </view>
        <view style="display: block; width: 55%;">
            <view class="infoCtn">
                <view>{{user.name}}</view>
                <image src="{{user.sex == '男' ? '/icon/man.png' : '/icon/woman.png'}}" mode="widthFix" class="sex"></image>
            </view>
            <view class="identity">{{identity}}</view>
            <view wx:if="{{user.phone!=''}}">
                <desc inner-text="{{tools.sub(user.phone, 3,2)}}" icon="/icon/phone1.png"></desc>
            </view>
        </view>
    </view>

    <!-- 数据展示栏 -->
    <!-- <view class="dataBox">
        <block wx:for="{{userInfo}}" wx:key="item">
            <view class="data">
                <view>{{item.data}}</view>
                <view>{{item.desc}}</view>
            </view>
        </block>
    </view> -->

    <!-- 小组件 -->
    <view class="widgetsBox">
        <block wx:for="{{teacher_widgets}}" wx:key="id">
            <view class="t_widgets" data-id="{{item.id}}" bindtap="teacherWidgetsTap">
                <image src="{{item.icon}}" mode="widthFix"></image>
                <view>{{item.desc}}</view>
            </view>
        </block>
    </view>
</view>

<!-- 父母用户基本信息栏 -->
<view wx:elif="{{id_flag=='parent'}}">
    <view class="infoBox">
        <view class="avator" style="height: {{imgHeight}}px;">
            <!-- <view wx:if="{{user!=null}}"> -->
            <image src="{{avator}}" mode="widthFix"></image>
            <!-- </view> -->
            <!-- <view wx:else> -->
            <!-- <image src="/icon/默认头像.png" mode="widthFix"></image> -->
            <!-- </view> -->
        </view>
        <view style="display: block; width: 55%;">
            <view class="infoCtn">
                <view>{{user.name}}</view>
                <image src="{{user.sex == '男' ? '/icon/man.png' : '/icon/woman.png'}}" mode="widthFix" class="sex"></image>
            </view>
            <view class="identity">{{identity}}</view>
            <view wx:if="{{user.phone!=''}}">
                <desc inner-text="{{tools.sub(user.phone, 3,2)}}" icon="/icon/phone1.png"></desc>
            </view>
        </view>
    </view>

    <!-- 数据展示栏 -->
    <!-- <view class="dataBox">
        <block wx:for="{{userInfo}}" wx:key="item">
            <view class="data">
                <view>{{item.data}}</view>
                <view>{{item.desc}}</view>
            </view>
        </block>
    </view> -->

    <!-- 小组件 -->
    <view class="widgetsBox">
        <block wx:for="{{parent_widgets}}" wx:key="id">
            <view class="t_widgets" data-id="{{item.id}}" bindtap="parentWidgetsTap">
                <image src="{{item.icon}}" mode="widthFix"></image>
                <view>{{item.desc}}</view>
            </view>
        </block>
    </view>
</view>

<!-- 学生用户基本信息栏 -->
<view wx:else>
    <view class="infoBox">
        <view class="avator" style="height: {{imgHeight}}px;" bindtap="upImage">
            <!-- <image src="{{avator==''?'/icon/默认头像.png':avator}}" mode="widthFix"></image> -->
            <image src="{{user.header}}" mode="widthFix"></image>
        </view>
        <view style="display: block; width: 55%;" wx:if="{{user!=null&&user!=''}}">
            <view class="infoCtn">
                <view>{{user.name}}</view>
                <image src="{{user.sex == '男' ? '/icon/man.png' : '/icon/woman.png'}}" mode="widthFix" class="sex"></image>
            </view>

            <view class="identity">{{identity}}</view>
            <!-- 以下将inner-text属性的内容替换成对应的{{页面data}}，icon属性不动 -->
            <view wx:if="{{user.phone!=null}}">
                <desc inner-text="{{tools.sub(user.phone, 3,2)}}" icon="/icon/phone1.png"></desc>
            </view>

        </view>
        <view wx:else style="display: block;margin-top: 5%;" bindtap="toLogin">立即登录</view>



    </view>

    <!-- 小组件 -->
    <view class="widgetsBox">
        <block wx:for="{{student_widgets}}" wx:key="id">
            <view class="t_widgets" data-id="{{item.id}}" bindtap="studentWidgetsTap">
                <image src="{{item.icon}}" mode="widthFix"></image>
                <view>{{item.desc}}</view>
            </view>
        </block>
    </view>
</view>